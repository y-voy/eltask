<h1>ユーザーの詳細</h1>

<%= link_to '一覧', admin_users_path  %>

<table>
  <tr>
    <th><%= User.human_attribute_name(:name) %></th>
    <td><%= link_to @user.name, [:admin, @user] %></td>
  </tr>
  <tr>
    <th><%= User.human_attribute_name(:email) %></th>
    <td><%= @user.email %></td>
  </tr>
  <tr>
    <th><%= User.human_attribute_name(:admin) %></th>
    <td><%= @user.admin? ? 'あり' : 'なし' %></td>
  </tr>
  <tr>
    <th><%= User.human_attribute_name(:created_at) %></th>
    <td><%= @user.created_at %></td>
  </tr>
</table>
<div class="panel panel-default">
  <div class="panel-heading"></div>
<table class="table">
  <tr>
    <th><%= t('activerecord.attributes.task.name') %></th>
    <th><%= t('activerecord.attributes.task.description') %></th>
    <th id="sort_created_at"><%= link_to t('activerecord.attributes.task.created_at'), tasks_path %></th>
    <th id="sort_expired"><%= link_to t('activerecord.attributes.task.expired_at'), tasks_path(sort_expired: 'true')  %></th>
    <th class="index_status" id="sort_status"><%= link_to t('activerecord.attributes.task.status'), tasks_path(sort_status: 'true') %></th>
    <th class="index_priority" id="sort_priority"><%= link_to t('activerecord.attributes.task.priority'), tasks_path(sort_priority: 'true') %></th>
  </tr>
<% @user.tasks.each do |task| %>
  <tr>
    <td><%= task.name.truncate(20) %></td>
    <td><%= task.description.truncate(30) %></td>
    <td><%= task.created_at.strftime('%Y-%m-%d %H:%M') %></td>
    <td><%= task.expired_at.strftime('%Y-%m-%d %H:%M') %></td>
    <td class="index_status"><%= task.status %></td>
    <td class="index_priority"><%= task.priority %></td>
    <td><%= link_to t('view.detail'), task_path(task.id), class: "btn-sm btn-primary" %></td>
    <td><%= link_to t('view.edit'), edit_task_path(task.id), class: "btn-sm btn-success" %></td>
    <td><%= link_to t('view.destroy'), task_path(task.id), method: :delete, data: { confirm: "本当に削除しますか？" }, class: "btn-sm btn-danger" %></td>
  </tr>
  <% end %>
</table>
</div>
<%= link_to '編集', edit_admin_user_path(@user) %>
<%= link_to '削除', [:admin, @user], method: :delete, data: { confirm: "ユーザー「#{@user.name}」を削除します。よろしいですか？"} %>
